(()=>{"use strict";var e={addEditorTopBar:function(){var e,t,n;jQuery("#elementor-editor-wrapper-v2").length&&(e=jQuery(".MuiBox-root div:first-child div + div")).length&&(t=jQuery("<span/>").addClass("eui-box eui-tooltip MuiBox-root css-0"),n=jQuery("<button>",{class:"MuiButtonBase-root MuiToggleButton-root MuiToggleButton-sizeSmall MuiToggleButton-standard eui-toggle-button css-1eryoft elementor-panel-menu-item-search-and-replace",tabindex:"0",type:"button",value:"Search & Replace","aria-pressed":"false","aria-label":"Search & Replace"}).html('<i class="eicon-search-results eicon-search-results--editor-top-bar"></i>'),t.html(n),t.appendTo(e))},addNav:function(){var e,t;jQuery("#elementor-panel-page-menu").length&&(e=jQuery(".elementor-panel-menu-item-finder")).length&&(t=jQuery("<div>",{class:"elementor-panel-menu-item elementor-panel-menu-item-search-and-replace"}).html('\n\t\t\t\t<div class="elementor-panel-menu-item-icon"><i class="eicon-search-results"></i></div>\n\t\t\t\t<div class="elementor-panel-menu-item-title">Search & Replace</div>\n\t\t\t'),e.after(t))}},a={},a={pluginUrl:elemsnr.plugin_ur,pluginDomain:elemsnr.plugin_domain,ajaxUrl:elemsnr.ajax_url,ajaxNonce:elemsnr.ajax_nonce,highlightColor:"#dc00af",generateRandomString:function(e){for(var t="",n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return t}},o={ajaxRequest:function(e,t,n,r){jQuery.ajax({method:"post",url:a.ajaxUrl,data:jQuery.extend({action:e,_wpnonce:a.ajaxNonce},n),beforeSend:function(){return o.beforeSendCallback(t)},success:function(e){return r(JSON.parse(e)[0])},complete:function(){return o.completeCallback(t)},error:function(){return o.errorCallback(t)}})},beforeSendCallback:function(e){e.find(".elemsnr-loading-bar").show()},completeCallback:function(e){e.find(".elemsnr-loading-bar").hide()},errorCallback:function(e){var e=e.find(".elemsnr-output").empty(),t='<storng>Internal Server Error!</strong><br />Contact your hosting provider and access your logs to learn more about what is causing the error; then the plugin author with the detials @ <a href="mailto:contact@'.concat(a.pluginDomain,'">contact@').concat(a.pluginDomain,"</a>.");e.addClass("elemsnr-output-active elemsnr-output-active-error"),e.html(t)},outputCallback:function(e,t,n){e=e.find(".elemsnr-output").empty();e.removeClass("elemsnr-output-active-success elemsnr-output-active-error").addClass("elemsnr-output-active-"+(1===t?"success":"error")),e.addClass("elemsnr-output-active").show().html(n)}},s={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function c(r){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?t(Object(l),!0).forEach(function(e){var t,n;t=r,e=l[n=e],(n=function(){var e=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=i(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(n);return"symbol"==i(e)?e:e+""}())in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(l,e))})}return r}s.toggleTextLink=function(e){function t(e,t,n,r){jQuery('input[name="elemsnr-search-phrase"]').attr({type:e,placeholder:t,readonly:n,class:r}),jQuery('input[name="elemsnr-replace-with-phrase"]').attr({type:e,placeholder:t,readonly:n,class:r})}function n(e,t){jQuery(e).toggle(t)}function r(e,t,n){jQuery('input[name="'+e+'"]').attr({disabled:t,checked:n})}e=jQuery(e.target);"elemsnr-text-only"===e.prop("id")&&(t("text","Enter your search phrase...",!1,""),n('label[for="elemsnr-highlight"], label[for="elemsnr-case-sensitive"]',!0),r("elemsnr-highlight",!1,!0),r("elemsnr-case-sensitive",!1,!0)),"elemsnr-links"===e.prop("id")&&(t("url","Enter your search URL...",!1,""),n('label[for="elemsnr-highlight"], label[for="elemsnr-case-sensitive"]',!1),r("elemsnr-highlight",!0,!1),r("elemsnr-case-sensitive",!0,!1)),"elemsnr-images"===e.prop("id")&&(t("url","Select your search image...",!0,"elemsnr-toggle-media-modal"),n('label[for="elemsnr-highlight"], label[for="elemsnr-case-sensitive"]',!1),r("elemsnr-highlight",!0,!1),r("elemsnr-case-sensitive",!0,!1))},s.toggleContent=function(e){e.preventDefault(),jQuery(e.target).closest(".elemsnr-modal").find(".elemsnr-content").slideToggle()},s.openModal=function(){function i(e,t,n,r,l,s){return jQuery("<input/>").attr({type:e,id:t,name:n,placeholder:r,autocomplete:l,checked:s})}function a(e,t){return jQuery("<label/>").prop("for",e).html(t)}function e(e,t,n,r,l){return t=i("checkbox",e,t,"",n,r),a(e,l).prepend(t.prop("outerHTML")).prop("outerHTML")}function t(e,t,n,r,l){return t=i("radio",e,t,"",n,r),a(e,l).prepend(t.prop("outerHTML")).prop("outerHTML")}function n(e,t,n,r,l){var s="eicon-"+("text"===e&&"elemsnr-search-phrase"===t?"search":"site-search"),s=jQuery("<i/>").addClass(s),e=i(e,t,n,r,l);return(n=a(t)).prepend(s),n.append(e.prop("outerHTML")).prop("outerHTML")}var r=jQuery("<div>").addClass("elemsnr-search-replace").prop("id","elemsnr-search-replace");r.html('\n\t\t<div class="elemsnr-modal" id="elemsnr-modal">\n\t\t\t<div class="elemsnr-body">\n\t\t\t\t<div class="elemsnr-header">\n\t\t\t\t\t<div class="elemsnr-logo">\n\t\t\t\t\t\t<i class="eicon-search-results"></i>\n\t\t\t\t\t\t<span class="elemsnr-title">Search & Replace</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="elemsnr-icons">\n\t\t\t\t\t\t<i class="eicon-divider" aria-hidden="true"></i>\n\t\t\t\t\t\t<i class="eicon-help" aria-hidden="true"></i>\n\t\t\t\t\t\t<i class="eicon-close" aria-hidden="true"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="elemsnr-loading-bar"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="elemsnr-content">\n\t\t\t\t\t<div id="elemsnr-output"></div>\n\t\t\t\t\t<div class="elemsnr-row elemsnr-row-html-regexp">\n\t\t\t\t\t\t<div class="elemsnr-col" data-tooltip="Search and replace HTML in the Text Editor widget with regular expressions (experts only).">\n\t\t\t\t\t\t\t'.concat(e("elemsnr-html-regexp","elemsnr-html-regexp","off",!1,'HTML with RegEx (experts only) <i class="eicon-help" aria-hidden="true"></i>'),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="elemsnr-row elemsnr-row-options">\n\t\t\t\t\t\t<div class="elemsnr-col">\n\t\t\t\t\t\t\t').concat(t("elemsnr-text-only","elemsnr-text-and-link","off",!0,"Text-only"),"\n\t\t\t\t\t\t\t").concat(t("elemsnr-links","elemsnr-text-and-link","off",!1,"Links (URLs)"),"\n\t\t\t\t\t\t\t").concat(t("elemsnr-images","elemsnr-text-and-link","off",!1,"Images"),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="elemsnr-col">\n\t\t\t\t\t\t\t').concat(e("elemsnr-highlight","elemsnr-highlight","off",!0,"Highlight text on search"),"\n\t\t\t\t\t\t\t").concat(e("elemsnr-case-sensitive","elemsnr-case-sensitive","off",!1,"Case-sensitive search and replace"),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="elemsnr-row">\n\t\t\t\t\t\t').concat(n("text","elemsnr-search-phrase","elemsnr-search-phrase","Enter your search phrase (no HTML allowed)...","off"),'\n\t\t\t\t\t\t<button type="submit" name="elemsnr-search-button" class="elemsnr-button">Search</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t').concat(n("text","elemsnr-replace-with-phrase","elemsnr-replace-with-phrase","Enter your replace with phrase (no HTML allowed)...","off"),'\n\t\t\t\t\t<div class="elemsnr-button-group" data-tooltip="Perform a search before proceeding with the replacement action.">\n\t\t\t\t\t\t<button type="submit" name="elemsnr-replace-button" class="elemsnr-button" disabled>Replace</button>\n\t\t\t\t\t\t<button type="reset" name="elemsnr-clear-button" class="elemsnr-button">Clear</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type="submit" name="elemsnr-html-regexp-button" class="elemsnr-button">Search & Replace</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t')),jQuery("#elemsnr-search-replace").remove(),jQuery("body").append(r),jQuery("#elemsnr-modal").draggable()},s.closeModal=function(e){e.preventDefault(),jQuery("#elemsnr-search-replace").remove()};var h={ajaxRequest:function(t,n,r){var l=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=new URL(document.location.href),s=n.find('input[name="elemsnr-search-phrase"]').val(),i=n.find('input[name="elemsnr-replace-with-phrase"]').val();l&&("elemsnr_highlight_search"===t?s=n.find("strong#elemsnr-undo-replace-with-phrase").text():(s=n.find("strong#elemsnr-undo-replace-with-phrase").text(),i=n.find("strong#elemsnr-undo-search-phrase").text())),jQuery.ajax({method:"post",url:a.ajaxUrl,data:c({action:t,_wpnonce:a.ajaxNonce,current_post_id:e.searchParams.get("post"),search_phrase:s,replace_with_phrase:i},r),beforeSend:o.beforeSendCallback(n),success:function(e){e&&!1===e.success||(e=JSON.parse(e)[0],"elemsnr_highlight_search"!==t&&n.find('input[name="elemsnr-search-phrase"], input[name="elemsnr-replace-with-phrase"]').val(""),l?"elemsnr_replace_search"===t?h.reloadEditor(n,e.message):"elemsnr_highlight_search"===t&&h.ajaxRequest("elemsnr_replace_search",n,r,!0):1===e.status?h.reloadEditor(n,e.message):jQuery("#elemsnr-output").addClass("elemsnr-output-active").empty().html(e.message))},complete:o.completeCallback(n)})},highlightTerms:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=(e.preventDefault(),jQuery(e.target).closest(".elemsnr-modal")),n={is_highlighted:e.find('input[name="elemsnr-highlight"]:checked').length,is_text_only:e.find('input[id="elemsnr-text-only"]:checked').length,is_case_sensitive:e.find('input[name="elemsnr-case-sensitive"]:checked').length,is_links:e.find('input[id="elemsnr-links"]:checked').length,is_images:e.find('input[id="elemsnr-images"]:checked').length};h.ajaxRequest("elemsnr_highlight_search",e,n,t)},unHighlightTerms:function(e){e.preventDefault();var e=jQuery(e.target).closest(".elemsnr-modal"),t={is_highlighted:e.find('input[name="elemsnr-highlight"]:checked').length,is_text_only:e.find('input[id="elemsnr-text-only"]:checked').length,is_case_sensitive:e.find('input[name="elemsnr-case-sensitive"]:checked').length,is_links:e.find('input[id="elemsnr-links"]:checked').length,is_images:e.find('input[id="elemsnr-images"]:checked').length};h.ajaxRequest("elemsnr_unhighlight_search",e,t)},replaceTerms:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=(e.preventDefault(),jQuery(e.target).closest(".elemsnr-modal")),n={is_highlighted:e.find('input[name="elemsnr-highlight"]:checked').length,is_text_only:e.find('input[id="elemsnr-text-only"]:checked').length,is_case_sensitive:e.find('input[name="elemsnr-case-sensitive"]:checked').length,is_links:e.find('input[id="elemsnr-links"]:checked').length,is_images:e.find('input[id="elemsnr-images"]:checked').length};h.ajaxRequest("elemsnr_replace_search",e,n,t)},reloadModal:function(){var e,t,n,r,l=JSON.parse(sessionStorage.getItem("elemsnr"));null!==l&&(s.openModal(),(e=jQuery(".elemsnr-modal")).length)&&(n={placeholder:"Enter your search URL...",readonly:!(t={placeholder:"Enter your search phrase...",readonly:!1,class:""}),class:""},r={placeholder:"Select your search image...",readonly:!0,class:"elemsnr-toggle-media-modal"},e.find('input[name="elemsnr-search-phrase"]').prop(t).val(l.search_phrase),e.find('input[name="elemsnr-replace-with-phrase"]').prop(t).val(l.replace_with_phrase),e.find('input[name="elemsnr-highlight"]').prop("checked",l.is_highlighted),e.find('input[id="elemsnr-text-only"]').prop("checked",l.is_text_only),e.find('input[name="elemsnr-case-sensitive"]').prop("checked",l.is_case_sensitive),e.find('input[id="elemsnr-links"]').prop("checked",l.is_links),e.find('input[id="elemsnr-images"]').prop("checked",l.is_images),l.search_phrase&&e.find('button[name="elemsnr-replace-button"]').prop("disabled",!1),l.is_links&&(e.find('input[name="elemsnr-search-phrase"]').prop(n),e.find('input[name="elemsnr-replace-with-phrase"]').prop(n)),l.is_images&&(e.find('input[name="elemsnr-search-phrase"]').prop(r),e.find('input[name="elemsnr-replace-with-phrase"]').prop(r)),e.find('label[for="elemsnr-highlight"]').css("display",l.show_is_highlighted),e.find('label[for="elemsnr-case-sensitive"]').css("display",l.show_is_case_sensitive),jQuery("#elemsnr-output").addClass("elemsnr-output-active").empty().html(l.response_message),(e.find('input[name="elemsnr-highlight"]:checked').length||e.find("#elemsnr-links:checked").length||e.find("#elemsnr-images:checked").length)&&(elementor.reloadPreview(),elementor.once("preview:loaded",function(){elementor.$preview.contents().find("head").append(jQuery("<style/>").prop("id","elemsnr").html("elsnr-highlight { background-color: ".concat(a.highlightColor,"; padding: 3px; color: #242628; } .elsnr-highlight { outline: 3px solid ").concat(a.highlightColor,"; }")))})),sessionStorage.removeItem("elemsnr"))},reloadEditor:function(e,t){e={search_phrase:e.find('input[name="elemsnr-search-phrase"]').val(),replace_with_phrase:e.find('input[name="elemsnr-replace-with-phrase"]').val(),is_highlighted:e.find('input[name="elemsnr-highlight"]:checked').length,show_is_highlighted:e.find('label[for="elemsnr-highlight"]').css("display"),is_case_sensitive:e.find('input[name="elemsnr-case-sensitive"]:checked').length,show_is_case_sensitive:e.find('label[for="elemsnr-case-sensitive"]').css("display"),is_text_only:e.find('input[id="elemsnr-text-only"]:checked').length,is_links:e.find('input[id="elemsnr-links"]:checked').length,is_images:e.find('input[id="elemsnr-images"]:checked').length,response_message:t};sessionStorage.setItem("elemsnr",JSON.stringify(e)),window.location.reload(!0)},highlightOnLoad:function(){var e=jQuery(".elemsnr-modal");e.length&&(e.find('input[name="elemsnr-highlight"]:checked').length||e.find("#elemsnr-links:checked").length||e.find("#elemsnr-images:checked").length)&&(elementor.reloadPreview(),elementor.once("preview:loaded",function(){elementor.$preview.contents().find("head").append(jQuery("<style/>").prop("id","elemsnr").html("elsnr-highlight { background-color: ".concat(a.highlightColor,"; padding: 3px; color: #242628; } .elsnr-highlight { outline: 3px solid ").concat(a.highlightColor,"; }")))}))},highlightSearchPreview:function(){"highlight"===new URL(window.location.href).searchParams.get("elemsnr")&&(elementor.reloadPreview(),elementor.once("preview:loaded",function(){elementor.$preview.contents().find("head").append(jQuery("<style/>").prop("id","elemsnr").html("elsnr-highlight { background-color: ".concat(a.highlightColor,"; padding: 3px; color: #242628; } .elsnr-highlight { outline: 3px solid ").concat(a.highlightColor,"; }")))}))},undoTerms:function(e){e.preventDefault(),h.highlightTerms(e,!0)}},n={replace:function(e){e.preventDefault();e=jQuery(e.target).closest(".elemsnr-modal");h.ajaxRequest("elemsnr_replace_html_regex",e,{})},toggle:function(e){var t=jQuery(e.target).closest(".elemsnr-modal"),n=t.find('input[name="elemsnr-search-phrase"]'),r=t.find('input[name="elemsnr-replace-with-phrase"]'),l=t.find(".elemsnr-row-options input"),s=t.find('.elemsnr-row-options label[for*="elemsnr-"]'),i=t.find('button[name="elemsnr-search-button"]'),a=t.find(".elemsnr-button-group"),o=t.find('button[name="elemsnr-html-regexp-button"]'),c=t.find("#elemsnr-output");jQuery(e.target).prop("checked")?(n.add(r).attr({type:"text",placeholder:"Enter your regular expression...",readonly:!1,class:""}),l.prop("disabled",!0),s.hide(),i.add(a).hide(),o.show(),c.addClass("elemsnr-output-active").html('\n        <strong>It is strongly recommended to <a href="/wp-admin/admin.php?page=elemsnr_backup">backup your database</a> before you run HTML RegEx.</strong> \n        Test all your regular expressions at <a href="https://www.regular-expressions.info/" target="_blank">Regular Expressions</a>.\n      ')):(n.add(r).attr({type:"text",placeholder:"Enter your search phrase...(no HTML allowed)",readonly:!1,class:""}),l.prop("disabled",!1),t.find("input#elemsnr-text-only").prop("checked",!0),s.show(),i.add(a).show(),o.hide(),c.removeClass("elemsnr-output-active").empty())}},r={open:function(e){var t,n=jQuery(e.target);t||(jQuery('div[id^="__wp-uploader-id"]').remove(),(t=wp.media.frames.meta_image_frame=wp.media({title:"Search & Replace for Elementor (Images)",button:{text:"Select Image"}})).on("select",function(){var e=t.state().get("selection").first().toJSON();n.val(e.url)})),t.open()}},l=jQuery;setTimeout(function(){e.addEditorTopBar()},500),l(document).on("click","#elementor-panel-header-menu-button",e.addNav),l(document).on("click",'input[name="elemsnr-text-and-link"]',s.toggleTextLink),l(document).on("click",".elementor-panel-menu-item-search-and-replace",s.openModal),l(document).on("click","i.eicon-close",s.closeModal),l(document).on("click","i.eicon-divider",s.toggleContent),l(document).on("click","input.elemsnr-toggle-media-modal",r.open),h.reloadModal(),h.highlightOnLoad(),h.highlightSearchPreview(),l(document).on("click",'button[name="elemsnr-search-button"]',h.highlightTerms),l(document).on("click",'button[name="elemsnr-replace-button"]',h.replaceTerms),l(document).on("click",'button[name="elemsnr-clear-button"]',h.unHighlightTerms),l(document).on("click",'a[name="elemsnr-undo-button"]',h.undoTerms),l(document).on("click",'input[name="elemsnr-html-regexp"]',n.toggle),l(document).on("click",'button[name="elemsnr-html-regexp-button"]',n.replace)})();